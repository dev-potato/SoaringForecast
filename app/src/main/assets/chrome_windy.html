<!DOCTYPE html>
<meta charset="UTF-8">
<html>
<head>
    <script src="https://unpkg.com/leaflet@0.7.7/dist/leaflet.js"></script>
    <script src="https://api4.windy.com/assets/libBoot.js"></script>

    <style>
  		#windy {
  			width: 100%;
  			height: 700px;
  		}

    </style>
</head>
<body>
<div id="windy"></div>

<style>

        #windy #embed-zoom {
            display: none !important;
        }

        .leaflet-marker-draggable {
          //removes wind popup on click
            display: none;
         }


</style>

<script type="text/javascript">

     function drawLine(fromLat, fromLong, toLat, toLong){
       var pointA = new L.LatLng(fromLat, fromLong);
       var pointB = new L.LatLng(toLat, toLong);
       var pointList = [pointA, pointB];

       var taskLine = new L.polyline(pointList, {
       color: 'red',
       weight: 3,
       opacity: 0.5,
       smoothFactor: 1 });
       taskLine.addTo(L.map);
      }

    const options = {

                // Required: API key
                 key: 'y852QwXYurm70lQozoV2rGSLQXoltuQc',

                // Put additional console output
                verbose: true,

                // Optional: Initial state of the map
                lat: 43.1393051,
                lon:  -72.076004,
                zoom: 7
        }
    // Initialize Windy API
    windyInit( options, windyAPI => {
        // windyAPI is ready, and contain 'map', 'store',
        // 'picker' and other usefull stuff

        //const { map } = windyAPI
        // .map is instance of Leaflet map

    const { map, utils, picker, overlays, broadcast } = windyAPI

        // override createPicker as bug on line s.setZoomCenter(this.x, this.y));
        //W.pickerDesktop.createPicker = function(){};

        //Close picker as not currently displaying properly
        //picker.on('pickerOpened', latLon => {
        //  picker.close()
        //})

        var windMetric = overlays.wind.metric
        // 'kt' .. actually selected metric for wind overlay
        // Read only value! Do not modify.
        overlays.wind.listMetrics()
        // ['kt',  'm/s', 'km/h', 'mph']
        // Wait since weather is rendered
         broadcast.once('pickerOpened', () => {
                broadcast.fire('rqstClose','picker')
                console.log('rqstClose')

         })

        <!--L.popup()-->
            <!--.setLatLng([getLat(),getLong()])-->
            <!--.setContent("Hello World")-->
            <!--.openOn( map );-->


    })
</script>
</body>
</html>